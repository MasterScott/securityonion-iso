#!/bin/sh

set -e

case "$1" in
    install|upgrade)
    
	FILE="/etc/login.defs"
	if [ -f $FILE ]; then
		if ! grep "998" $FILE >/dev/null 2>&1; then
			echo "Reserving a UID and GID for casper..."
			cp $FILE /etc/login.defs.orig || echo "Error creating backup copy of $FILE!"
			sed -i '/SYS_UID_MAX/a SYS_UID_MAX	998' $FILE || echo "Error updating $FILE!"
			sed -i '/SYS_GID_MAX/a SYS_GID_MAX	998' $FILE || echo "Error updating $FILE!"
		fi
	fi


    ;;

    abort-upgrade)
    ;;

    *)
        echo "preinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0
